import{j as e,L as P,r as x,u as R,d as S,c as k,g as M,z as L}from"./index-DJP5h2fB.js";function D({onClickCreate:s}){return e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"개인 스터디"}),e.jsx("p",{className:"text-gray-600",children:"나만의 공부방을 만들어 체계적으로 학습하세요"})]}),e.jsxs("button",{onClick:s,className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 px-4 py-2 text-base",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"개인 공부방 만들기"]})]})}function z(s){return s>=80?"bg-green-500":s>=50?"bg-yellow-500":"bg-red-500"}function E({room:s}){const t=s.totalProblems>0?Math.round(s.graduatedProblems/s.totalProblems*100):0;return e.jsx(P,{to:`/personal-study/${s.studyRoomId}`,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow cursor-pointer h-full",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:s.category}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t,"%"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:s.description})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"진행률"}),e.jsxs("span",{children:[s.graduatedProblems,"/",s.totalProblems]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${z(t)}`,style:{width:`${t}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("i",{className:"ri-question-line mr-2"}),e.jsxs("span",{children:["문제 ",s.totalProblems,"개"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("i",{className:"ri-check-line mr-2"}),e.jsxs("span",{children:["졸업 ",s.graduatedProblems,"개"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200",children:[e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"학습 계속하기 →"}),e.jsx("i",{className:"ri-arrow-right-line text-gray-400"})]})]})})}function I({totalRooms:s,totalQuestions:t,totalCompleted:n,averageProgress:d}){return e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"학습 현황"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:s}),e.jsx("div",{className:"text-sm text-gray-600",children:"총 공부방"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:t}),e.jsx("div",{className:"text-sm text-gray-600",children:"총 문제"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:n}),e.jsx("div",{className:"text-sm text-gray-600",children:"완료한 문제"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[d,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"평균 진행률"})]})]})]})}function $({open:s,roomName:t,roomDescription:n,roomCategory:d,onChangeRoomName:m,onChangeRoomDescription:i,onChangeRoomCategory:u,onClose:c,onCreate:g}){return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"개인 공부방 만들기"}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"공부방 이름"}),e.jsx("input",{type:"text",value:t,onChange:r=>m(r.target.value),placeholder:"공부방 이름을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"공부방 설명"}),e.jsx("textarea",{value:n,onChange:r=>i(r.target.value),placeholder:"공부방에 대한 간단한 설명을 입력하세요",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리"}),e.jsx("input",{type:"text",value:d,onChange:r=>u(r.target.value),placeholder:"예: 프로그래밍, 영어, 역사",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"취소"}),e.jsx("button",{onClick:g,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"만들기"})]})]})}):null}const q=()=>{const[s,t]=x.useState(!1),n=R(),{isLoggedIn:d,isLoading:m}=S(),[i,u]=x.useState(""),[c,g]=x.useState(""),[r,b]=x.useState(""),{data:j,isLoading:p}=k(),y=M(),o=j?.rooms??[],h=o.length,f=o.reduce((a,l)=>a+l.totalProblems,0),N=o.reduce((a,l)=>a+l.graduatedProblems,0),v=Math.round(o.reduce((a,l)=>{const C=l.totalProblems>0?l.graduatedProblems/l.totalProblems*100:0;return a+C},0)/(h||1)),w=()=>{i.trim()&&y.mutate({name:i,description:c,category:r},{onSuccess:()=>{t(!1),u(""),g(""),b("")}})};return x.useEffect(()=>{!m&&!d&&(L.error("로그인이 필요합니다."),n("/login",{replace:!0}))},[m,d,n]),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(D,{onClickCreate:()=>t(!0)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.length>0?o.map(a=>e.jsx(E,{room:a},a.studyRoomId)):e.jsx("div",{className:"col-span-full",children:p?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("i",{className:"ri-home-smile-line text-4xl text-gray-300 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"개인 공부방이 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"첫 공부방을 만들어 학습을 시작해 보세요."}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 px-4 py-2 text-base",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"개인 공부방 만들기"]})]})})}),e.jsx(I,{totalRooms:h,totalQuestions:f,totalCompleted:N,averageProgress:v}),e.jsx($,{open:s,roomName:i,roomDescription:c,roomCategory:r,onChangeRoomName:u,onChangeRoomDescription:g,onChangeRoomCategory:b,onClose:()=>t(!1),onCreate:w})]})};export{q as default};
