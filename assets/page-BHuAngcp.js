import{j as e,L as y,r as l,u as J,d as P,b as R,k as L,l as z,z as I}from"./index-CvvNVOg6.js";function D({onClickJoin:s,onClickCreate:t}){return e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"그룹 스터디"}),e.jsx("p",{className:"text-gray-600",children:"스터디원들과 함께 문제를 공유하고 학습하세요"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:s,className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 px-4 py-2 text-base",children:[e.jsx("i",{className:"ri-key-line mr-2"}),"그룹 참여"]}),e.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 px-4 py-2 text-base",children:[e.jsx("i",{className:"ri-team-line mr-2"}),"그룹 만들기"]})]})]})}function E({group:s,copiedCode:t,onCopyCode:n}){const r=s.totalProblems>0?Math.round(s.graduatedProblems/s.totalProblems*100):0;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow h-full",children:[e.jsxs(y,{to:`/groups/${s.studyRoomId}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:s.category})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:s.name})]})}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("i",{className:"ri-team-line mr-2"}),e.jsxs("span",{children:["멤버 ",s.memberCount,"명"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("i",{className:"ri-question-line mr-2"}),e.jsxs("span",{children:["문제 ",s.totalProblems,"개"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("i",{className:"ri-check-line mr-2"}),e.jsxs("span",{children:["졸업 ",s.graduatedProblems,"개"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"진행률"}),e.jsxs("span",{children:[r,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-500",style:{width:`${r}%`}})})]})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"ri-key-2-line text-gray-400"}),e.jsx("span",{className:"text-sm font-mono font-medium text-gray-700",children:s.joinCode})]}),e.jsx("button",{onClick:()=>n(s.joinCode),className:"inline-flex items-center justify-center font-medium rounded-md transition-colors whitespace-nowrap cursor-pointer hover:bg-gray-200 px-2 py-1 text-sm",children:t===s.joinCode?e.jsx(e.Fragment,{children:e.jsx("i",{className:"ri-check-line text-green-600"})}):e.jsx(e.Fragment,{children:e.jsx("i",{className:"ri-file-copy-line text-gray-600"})})})]})}),e.jsx(y,{to:`/groups/${s.studyRoomId}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"그룹 입장 →"}),e.jsx("i",{className:"ri-arrow-right-line text-gray-400"})]})})]})}function $({open:s,joinCode:t,onChangeJoinCode:n,onClose:r,onJoin:i}){return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"그룹 참여"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"그룹 코드"}),e.jsx("input",{type:"text",value:t,onChange:o=>n(o.target.value),placeholder:"예: A3K9XP2M",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"그룹 관리자로부터 받은 그룹 코드를 입력해주세요"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"취소"}),e.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"참여하기"})]})]})}):null}function A({open:s,groupName:t,groupDescription:n,groupCategory:r,onChangeGroupName:i,onChangeGroupDescription:o,onChangeGroupCategory:c,onClose:d,onCreate:m}){return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"그룹 만들기"}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"그룹 이름"}),e.jsx("input",{type:"text",value:t,onChange:a=>i(a.target.value),placeholder:"그룹 이름을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리"}),e.jsx("input",{type:"text",value:r,onChange:a=>c(a.target.value),placeholder:"예: 코딩테스트, 면접 등",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"그룹 설명"}),e.jsx("textarea",{value:n,onChange:a=>o(a.target.value),placeholder:"그룹에 대한 간단한 설명을 입력하세요",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"취소"}),e.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"만들기"})]})]})}):null}function T(){const[s,t]=l.useState(!1),[n,r]=l.useState(!1),[i,o]=l.useState(""),[c,d]=l.useState(""),[m,a]=l.useState(""),[u,g]=l.useState(""),[N,b]=l.useState(""),h=J(),{isLoggedIn:j,isLoading:p}=P(),{data:v,isLoading:w}=R(),C=L(),k=z(),f=v?.rooms??[],G=()=>{i.trim()&&k.mutate({joinCode:i.trim()},{onSuccess:()=>{t(!1),o("")}})},S=()=>{c.trim()&&C.mutate({name:c,description:m,category:u},{onSuccess:()=>{r(!1),d(""),a(""),g("")}})},M=x=>{navigator.clipboard.writeText(x),b(x),setTimeout(()=>b(""),2e3)};return l.useEffect(()=>{!p&&!j&&(I.error("로그인이 필요합니다."),h("/login",{replace:!0}))},[p,j,h]),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(D,{onClickJoin:()=>t(!0),onClickCreate:()=>r(!0)}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"내 그룹"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.length>0?f.map(x=>e.jsx(E,{group:x,copiedCode:N,onCopyCode:M},x.studyRoomId)):e.jsx("div",{className:"col-span-full",children:w?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("i",{className:"ri-team-line text-4xl text-gray-300 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"참여 중인 그룹이 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"그룹을 만들거나 참여 코드를 입력해 보세요."}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 px-4 py-2 text-base",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"그룹 만들기"]}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-white text-gray-700 hover:bg-gray-50 border border-gray-300 focus:ring-2 focus:ring-gray-300 px-4 py-2 text-base",children:[e.jsx("i",{className:"ri-key-2-line mr-2"}),"참여 코드 입력"]})]})]})})})]}),e.jsx($,{open:s,joinCode:i,onChangeJoinCode:o,onClose:()=>t(!1),onJoin:G}),e.jsx(A,{open:n,groupName:c,groupDescription:m,groupCategory:u,onChangeGroupName:d,onChangeGroupDescription:a,onChangeGroupCategory:g,onClose:()=>r(!1),onCreate:S})]})}export{T as default};
