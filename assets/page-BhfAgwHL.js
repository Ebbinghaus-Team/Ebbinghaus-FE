import{j as e,r as i,L as N,u as w,d as C,z as R}from"./index-CvvNVOg6.js";import{a as g}from"./apiMappers-ZSGH_g8X.js";import{f as k}from"./date-C8p9obEE.js";import{u as L}from"./hooks-Q4M3YPGn.js";function T(){return e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"오늘의 복습"}),e.jsx("p",{className:"text-gray-600",children:"과학적 복습 주기에 따라 오늘 풀어야 할 문제들입니다"})]})}function A({total:s,completed:t,remaining:a,progress:r}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:s}),e.jsx("div",{className:"text-sm text-gray-600",children:"총 문제"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:t}),e.jsx("div",{className:"text-sm text-gray-600",children:"완료"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:a}),e.jsx("div",{className:"text-sm text-gray-600",children:"남은 문제"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsxs("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:[r,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"진행률"})]})]})}function E({active:s,onChange:t,options:a=["전체","1차관문","2차관문"]}){return e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:a.map(r=>e.jsx("button",{onClick:()=>t(r),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${s===r?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:r},r))})})}const S=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,r)=>r?r.toUpperCase():a.toLowerCase()),h=s=>{const t=P(s);return t.charAt(0).toUpperCase()+t.slice(1)},b=(...s)=>s.filter((t,a,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===a).join(" ").trim(),I=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var _={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $=i.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:c="",children:n,iconNode:m,...d},l)=>i.createElement("svg",{ref:l,..._,width:t,height:t,stroke:s,strokeWidth:r?Number(a)*24/Number(t):a,className:b("lucide",c),...!n&&!I(d)&&{"aria-hidden":"true"},...d},[...m.map(([x,u])=>i.createElement(x,u)),...Array.isArray(n)?n:[n]]));const p=(s,t)=>{const a=i.forwardRef(({className:r,...c},n)=>i.createElement($,{ref:n,iconNode:t,className:b(`lucide-${S(h(s))}`,`lucide-${s}`,r),...c}));return a.displayName=h(s),a};const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],D=p("circle-check",O);const Q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],q=p("circle-x",Q);function z(s){switch(s){case"1차관문":return"bg-yellow-100 text-yellow-800";case"2차관문":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function F({problems:s}){return e.jsx("div",{className:"space-y-4",children:s.map(t=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z(g(t.gate))}`,children:g(t.gate)}),e.jsx("span",{className:"text-sm text-gray-500",children:t.subject})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:t.question}),e.jsxs("p",{className:"text-sm text-gray-500",children:["복습 예정일: ",k(t.nextReviewDate)]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[t.attemptStatus==="CORRECT"&&e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(D,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"정답"})]}),t.attemptStatus==="INCORRECT"&&e.jsxs("div",{className:"flex items-center text-red-500",children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"오답"})]}),t.attemptStatus==="NOT_ATTEMPTED"&&e.jsx(N,{to:`/solve?id=${t.problemId}`,children:e.jsx("button",{type:"button",className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 px-4 py-2 text-base",children:"문제 풀기"})})]})]})},t.problemId))})}const H=()=>{const[s,t]=i.useState("전체"),a=w(),{isLoggedIn:r,isLoading:c}=C(),{data:n,isLoading:m}=L();i.useEffect(()=>{!c&&!r&&(R.error("로그인이 필요합니다."),a("/login",{replace:!0}))},[c,r,a]);const d=o=>o==="MCQ"?"객관식":o==="OX"?"OX":o==="SHORT"?"단답형":"서술형",l=(n?.problems??[]).map(o=>({problemId:o.problemId,question:o.question,problemType:o.problemType,gate:o.gate,nextReviewDate:o.nextReviewDate,attemptStatus:o.attemptStatus,subject:d(o.problemType)})),x=i.useMemo(()=>{if(s==="전체")return l;const o=s==="1차관문"?"GATE_1":"GATE_2";return l.filter(f=>f.gate===o)},[s,l]),u=n?.dashboard.totalCount??0,j=n?.dashboard.completedCount??0,y=n?.dashboard.incompletedCount??0,v=Math.round(n?.dashboard.progressRate??0);return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(T,{}),m?e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/2"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{total:u,completed:j,remaining:y,progress:v}),e.jsx(E,{active:s,onChange:t}),e.jsx(F,{problems:x})]})]})};export{H as default};
