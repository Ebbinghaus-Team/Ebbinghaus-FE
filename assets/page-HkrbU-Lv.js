import{h as y,r as d,i as v,j as e,L as i}from"./index-DJP5h2fB.js";import{a as c}from"./apiMappers-ZSGH_g8X.js";import{a as x}from"./date-C8p9obEE.js";const G=()=>{const{id:n}=y(),[r,m]=d.useState("전체"),g=Number(n)||0,{data:t,isLoading:u}=v(g),a=d.useMemo(()=>t?.problems??[],[t]),o=d.useMemo(()=>{if(r==="전체")return a;if(r==="졸업한 문제")return a.filter(l=>l.reviewGate==="GRADUATED");const s=r==="1차관문"?"GATE_1":"GATE_2";return a.filter(l=>l.reviewGate===s)},[r,a]),b=a.filter(s=>s.reviewGate==="GATE_1").length,h=a.filter(s=>s.reviewGate==="GATE_2").length,p=a.filter(s=>s.reviewGate==="GRADUATED").length,j=s=>{switch(s){case"완료":return"bg-green-100 text-green-800";case"1차관문":return"bg-yellow-100 text-yellow-800";case"2차관문":return"bg-blue-100 text-blue-800";case"미완료":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return u||!t?e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"h-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/2"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(i,{className:"text-gray-500 hover:text-gray-700",to:"/personal-study",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.studyRoomName}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:t.studyRoomCategory})]}),e.jsx("p",{className:"text-gray-600",children:t.studyRoomDescription})]}),e.jsx(i,{to:`/create?from=personal&studyId=${n}`,children:e.jsxs("button",{className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 px-4 py-2 text-base",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"문제 추가"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:t.dashboard.totalCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"총 문제"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:t.dashboard.completedCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"졸업한 문제"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:t.dashboard.incompletedCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"남은 문제"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[t.dashboard.progressRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"진행률"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[{label:"전체",count:a.length},{label:"1차관문",count:b},{label:"2차관문",count:h},{label:"졸업한 문제",count:p}].map(s=>e.jsxs("button",{onClick:()=>m(s.label),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r===s.label?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[s.label," (",s.count,")"]},s.label))})}),e.jsx("div",{className:"space-y-4",children:o.length>0?o.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${j(c(s.reviewGate))}`,children:c(s.reviewGate)}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:s.problemType})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:s.question}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["작성일: ",x(s.createdAt)]}),s.lastReviewedAt&&e.jsxs("span",{children:["마지막 복습: ",x(s.lastReviewedAt)]}),e.jsxs("span",{children:["복습 횟수: ",s.reviewCount,"회"]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(i,{to:`/solve?id=${s.problemId}&from=personal`,children:e.jsx("button",{className:"inline-flex items-center justify-center font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 px-3 py-1.5 text-sm",children:"문제풀기"})})})]})},s.problemId)):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx("i",{className:"ri-file-list-3-line text-5xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"해당하는 문제가 없습니다"})]})})]})};export{G as default};
